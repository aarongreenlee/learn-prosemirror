<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <style>
    .needs-caps {
      background: #fdd; border-bottom: 1px solid #f22;
    }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Traversing content</h1>
      <p>A node's <code>forEach()</code> function accepts a function to invoke once for each child node. Note that this will iterate over one generation of a node's children, and doesn't recursively walk down the document.</p>
      <p>Here, the content is checked for run-on sentences in a naive manner (if there is a string of more than 50 characters without a period).</p>
      <pre>
pm.on( &apos;transform&apos;, () =&gt; {
  // Clear previously marked parts.
  while ( pm.ranges.ranges.length &gt; 0 ) {
    pm.removeRange( pm.ranges.ranges[0] )
  }
  function scanFragment( fragment, position ) {
    fragment.forEach((child, offset) =&gt; scan(child, position + offset))
  }
  function scan(node, position) {
    if ( node.isText ) {
      let match
      while (match = badCapitalization.exec(node.text)) {
        pm.markRange(position + match.index, position + match.index + match[0].length, {className: &quot;needs-caps&quot;})
      }
    }
    scanFragment(node.content, position + 1)
  }
  scanFragment(pm.doc.content, 0)
})
</pre>
      <p id="editor"></p>
      <p>Here we get the document node (<code>pm.getContent()</code>) and iterate over each of its child nodes. If the node  is a "textblock" node, meaning it contains nodes with inline content, then we check its contents for
    </div>
    <script src="dist/index.js"></script>
  </body>
</html>
